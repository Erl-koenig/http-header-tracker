<!doctype html>
<html>
    <head>
        <title>HTTP Header Tracker Settings</title>
        <link rel="stylesheet" href="settings.css" />
    </head>
    <body>
        <div class="container">
            <h1>HTTP Header Tracker Settings</h1>

            <div class="settings-section">
                <h2>Collection Mode</h2>
                <p class="description">
                    Choose how you want to store your collected header
                    statistics.
                </p>

                <div class="info-box">
                    <strong>Local-Only Mode (Default)</strong>
                    <p>
                        Leave the server URL empty to store all data locally in
                        your browser. Use the "Export" button in the popup to
                        download your data as JSON.
                    </p>
                    <strong>Local + Server Mode</strong>
                    <p>
                        Enter a server URL below to automatically upload
                        aggregated stats while also keeping a local copy.
                    </p>
                </div>

                <label for="serverEndpoint">Server URL (Optional):</label>
                <input
                    type="url"
                    id="serverEndpoint"
                    placeholder="https://your-server.com/plugin"
                    class="input-field"
                />
                <div class="button-row">
                    <button id="saveBtn" class="btn btn-primary">
                        Save Settings
                    </button>
                    <button id="testBtn" class="btn btn-secondary">
                        Test Connection
                    </button>
                </div>
                <div id="statusMsg" class="status-message"></div>
            </div>

            <div class="settings-section" id="frequencySection">
                <h2>Save Frequency</h2>
                <p class="description">
                    How often to save captured headers to storage (and upload to
                    server if configured).
                </p>

                <label for="uploadFrequency">Save every:</label>
                <select id="uploadFrequency" class="input-field">
                    <option value="1">1 minute</option>
                    <option value="5" selected>5 minutes</option>
                    <option value="15">15 minutes</option>
                    <option value="30">30 minutes</option>
                    <option value="60">60 minutes</option>
                </select>
                <div class="button-row">
                    <button id="saveFrequencyBtn" class="btn btn-primary">
                        Save Frequency
                    </button>
                    <div id="frequencyStatus" class="status-message"></div>
                </div>
            </div>

            <div class="settings-section">
                <h2>Data Management</h2>
                <p class="description">
                    Manage your locally stored header statistics.
                </p>

                <div class="info-box">
                    <p>
                        <strong>Total Stats:</strong>
                        <span id="totalStats">Loading...</span>
                    </p>
                    <p class="description">
                        Clearing data will delete all locally stored header
                        statistics. This action cannot be undone.
                    </p>
                    <p class="description warning-text">
                        <strong>Note:</strong> If you're using server mode, this
                        only clears local data. Previously uploaded data on the
                        server is not affected.
                    </p>
                </div>

                <div class="button-row">
                    <button id="clearDataBtn" class="btn btn-danger">
                        Clear All Data
                    </button>
                </div>
                <div id="clearStatus" class="status-message"></div>
            </div>

            <div class="settings-section">
                <h2>About</h2>
                <p>
                    HTTP Header Tracker collects anonymized HTTP header
                    statistics.
                </p>
                <p>
                    <strong>Version:</strong> 1.0<br />
                    <strong>Data Collected:</strong> HTTP response headers (with
                    sensitive values anonymized)<br />
                </p>
                <p>
                    <a href="privacy-policy.md" target="_blank"
                        >Read our Privacy Policy</a
                    >
                </p>
            </div>
        </div>

        <script src="settings.js"></script>
    </body>
</html>
